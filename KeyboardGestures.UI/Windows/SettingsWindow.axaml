<Window
    x:Class="KeyboardGestures.UI.Windows.SettingsWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:vm="using:KeyboardGestures.UI.ViewModels"
    Width="900"
    Height="600"
    Title="Settings"
    Background="#dfdfdf">

	<Grid ColumnDefinitions="1*, 2*" >

		<!-- LEFT PANEL: COMMAND LIST -->
		<Border Background="#dadada" CornerRadius="6" Padding="10" Margin="0,0,12,0">
			<Grid RowDefinitions="100,*">
				<TextBlock Grid.Row="0" Text="Commands"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Margin="0 0 0 8"/>

				<Button Content="Add New Command"
						Command="{Binding AddNew}"
						HorizontalAlignment="Stretch"
						Background="#3f7cff"
						Foreground="White"
						CornerRadius="4"
						Padding="8"/>

				<ListBox Grid.Row="1"
						 ItemsSource="{Binding Commands}"
						 SelectedItem="{Binding Selected}"
						 Background="#f5f7fa"
						 Margin="0 8 0 8"
						 BorderThickness="0"
						 CornerRadius="6">

					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Background="Transparent"
									Padding="12 8"
									CornerRadius="6">
								<StackPanel Orientation="Horizontal" Spacing="12">

									<!-- Command type -->
									<TextBlock Text="{Binding CommandType}"
											   Foreground="#333"
											   FontWeight="Bold"
											   FontSize="15"/>

									<TextBlock Text="â€¢" Foreground="#999"/>

									<!-- Sequence -->
									<ItemsControl ItemsSource="{Binding SequenceAsTextList}">
										<ItemsControl.ItemsPanel>
											<ItemsPanelTemplate>
												<StackPanel Orientation="Horizontal"
															Spacing="6"/>
											</ItemsPanelTemplate>
										</ItemsControl.ItemsPanel>

										<ItemsControl.ItemTemplate>
											<DataTemplate>
												<Border Background="#e3e9f1"
														Padding="6 3"
														CornerRadius="4"
														BorderBrush="#c3ccd9"
														BorderThickness="1">
													<TextBlock Text="{Binding .}"
															   FontSize="12"
															   Foreground="#333"/>
												</Border>
											</DataTemplate>
										</ItemsControl.ItemTemplate>
									</ItemsControl>

								</StackPanel>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>

					<ListBox.Styles>

						<!-- Modern separators (thin, subtle, bright) -->
						<Style Selector="ListBoxItem:not(:last-child)">
							<Setter Property="Margin" Value="0,0,0,6"/>
							<Setter Property="BorderBrush" Value="#dce1e9"/>
							<Setter Property="BorderThickness" Value="0 0 0 1"/>
						</Style>

						<!-- Default item -->
						<Style Selector="ListBoxItem">
							<Setter Property="CornerRadius" Value="0"/>
							<Setter Property="Background" Value="Transparent"/>
							<Setter Property="BorderThickness" Value="0"/>
							<Setter Property="Padding" Value="0"/>
						</Style>

						<!-- First item -->
						<Style Selector="ListBoxItem:first-child">
							<Setter Property="CornerRadius" Value="6 6 0 0"/>
						</Style>

						<!-- Last item -->
						<Style Selector="ListBoxItem:last-child">
							<Setter Property="CornerRadius" Value="0 0 6 6"/>
						</Style>

						<!-- Hover: light blue highlight -->
						<Style Selector="ListBoxItem:pointerover /template/ Border#PART_SelectedBorder">
							<Setter Property="Background" Value="#e9f2ff"/>
						</Style>

						<!-- Selected: modern blue pill -->
						<Style Selector="ListBoxItem:selected /template/ Border#PART_SelectedBorder">
							<Setter Property="Background" Value="#4c8dff"/>
							<Setter Property="TextElement.Foreground" Value="White"/>
						</Style>

					</ListBox.Styles>

				</ListBox>




			</Grid>
		</Border>


		<!-- RIGHT PANEL: EDITOR -->
		<Border Grid.Column="1"
                Background="#2b2b2b"
                CornerRadius="6"
                Padding="16">
			<StackPanel Spacing="12">

				<!-- Empty state -->
				<TextBlock Text="Select a command to edit..."
                           IsVisible="{Binding HasSelected}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="#777"
                           FontSize="16"
                           Margin="0 100 0 0"/>

				<!-- Editor -->
				<StackPanel IsVisible="{Binding HasSelected}" Spacing="16">

					<TextBlock Foreground="White" Text="Edit Command"
                               FontSize="18"
                               FontWeight="SemiBold"/>

					<!-- Command Type -->
					<StackPanel>
						<TextBlock Foreground="White" Text="Command Type" Margin="0 0 0 4"/>
						<ComboBox
							ItemsSource="{Binding CommandTypes}"
							SelectedItem="{Binding Editing.CommandType, Mode=TwoWay}"
							MinWidth="200"
							Background="#333"
							Foreground="Black"/>

					</StackPanel>

					<!-- Sequence -->
					<StackPanel>
						<TextBlock Foreground="White" Text="Sequence" Margin="0 0 0 4"/>

						<!-- Recorder TextBox -->
						<TextBox
							Text="{Binding Editing.SequenceText}"
							IsReadOnly="True"
							Background="#933"
							Padding="6"
							CornerRadius="4"
							GotFocus="SequenceBox_GotFocus"
							LostFocus="SequenceBox_LostFocus">
							<TextBox.Resources>
								<!-- focused border change -->
								<SolidColorBrush x:Key="TextControlBackgroundFocused" Color="#444"/>
								<SolidColorBrush x:Key="TextControlBorderBrushFocused" Color="#0c3"/>
							</TextBox.Resources>
						</TextBox>

						<!-- Accept button (visible only while recording) -->
						<!--<Button x:Name="AcceptButton" Content="Accept Sequence" Foreground="White"
								Command="{Binding AcceptSequence}"
								Margin="0 6 0 0"
								IsVisible="{Binding IsRecording}"/>-->
					</StackPanel>

					<!-- LaunchApp: Application Path -->
					<StackPanel IsVisible="{Binding IsLaunchApp}">
						<TextBlock Foreground="White" Text="Application Path" Margin="0 0 0 4"/>
						<TextBox Text="{Binding Editing.ApplicationPath}"
                                 Watermark="Path to .exe"/>
					</StackPanel>

					<!-- LaunchWebpage: URL -->
					<StackPanel IsVisible="{Binding IsLaunchWebpage}">
						<TextBlock Foreground="White" Text="URL" Margin="0 0 0 4"/>
						<TextBox Text="{Binding Editing.Url}"
                                 Watermark="www..."/>
					</StackPanel>

					<!-- Actions -->
					<StackPanel Orientation="Horizontal" Spacing="8">
						<Button Content="Save"
                                Command="{Binding SaveSelected}"
                                Background="#3f7cff"
                                Foreground="White"
                                CornerRadius="4"
                                Padding="8 4"/>

						<Button Content="Delete"
                                Command="{Binding DeleteSelected}"
                                Background="#663333"
                                Foreground="White"
                                CornerRadius="4"
                                Padding="8 4"/>
					</StackPanel>

				</StackPanel>

			</StackPanel>
		</Border>

	</Grid>
</Window>
