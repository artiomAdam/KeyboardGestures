<Window
    x:Class="KeyboardGestures.UI.Windows.CommandSettingsTab"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:vm="using:KeyboardGestures.UI.ViewModels"
    >

	<Grid ColumnDefinitions="1*, 2*" >

		<!-- LEFT PANEL: COMMAND LIST -->
		<Border Background="#A02B2B2B"
				CornerRadius="12"
				Padding="10"
				Margin="4">

			<Grid RowDefinitions="Auto,*,Auto"
				  RowSpacing="10">

				<!-- HEADER -->
				<StackPanel Grid.Row="0"
							Spacing="6">
					<TextBlock Text="Commands"
							   FontSize="18"
							   FontWeight="Bold"
							   Foreground="White"/>

					<Border Height="1"
							Background="#40FFFFFF"/>
				</StackPanel>

				<!-- COMMAND LIST -->
				<Border Grid.Row="1"
						Background="#1FFFFFFF"
						CornerRadius="10"
						Padding="4">

					<ListBox ItemsSource="{Binding Commands}"
							 SelectedItem="{Binding Selected}"
							 Background="Transparent"
							 BorderThickness="0"
							 VerticalAlignment="Stretch">

						<!-- ITEM TEMPLATE -->
						<ListBox.ItemTemplate>
							<DataTemplate>
								<StackPanel>

									<!-- ITEM CONTENT -->
									<Border Padding="10 8"
											CornerRadius="8"
											Background="Transparent">

										<StackPanel Orientation="Horizontal"
													Spacing="10"
													VerticalAlignment="Center">

											<TextBlock Text="{Binding CommandType}"
													   FontSize="14"
													   FontWeight="SemiBold"
													   Foreground="White"/>

											<TextBlock Text="â€¢"
													   Foreground="#80FFFFFF"/>

											<ItemsControl ItemsSource="{Binding SequenceAsTextList}">
												<ItemsControl.ItemsPanel>
													<ItemsPanelTemplate>
														<StackPanel Orientation="Horizontal"
																	Spacing="6"/>
													</ItemsPanelTemplate>
												</ItemsControl.ItemsPanel>

												<ItemsControl.ItemTemplate>
													<DataTemplate>
														<Border Background="#33FFFFFF"
																CornerRadius="6"
																Padding="6 3">
															<TextBlock Text="{Binding .}"
																	   FontSize="12"
																	   Foreground="White"/>
														</Border>
													</DataTemplate>
												</ItemsControl.ItemTemplate>
											</ItemsControl>

										</StackPanel>
									</Border>

									<!-- SEPARATOR -->
									<Border Height="1"
											Margin="10 0"
											Background="#20FFFFFF"/>
								</StackPanel>
							</DataTemplate>
						</ListBox.ItemTemplate>

						<!-- LIST STYLES -->
						<ListBox.Styles>

							<Style Selector="ListBoxItem">
								<Setter Property="Padding" Value="0"/>
								<Setter Property="Margin" Value="0"/>
								<Setter Property="Background" Value="Transparent"/>
								<Setter Property="BorderThickness" Value="0"/>
							</Style>

							<!-- Hover -->
							<Style Selector="ListBoxItem:pointerover > ContentPresenter">
								<Setter Property="Background" Value="#26FFFFFF"/>
							</Style>

							<!-- Selected -->
							<Style Selector="ListBoxItem:selected > ContentPresenter">
								<Setter Property="Background" Value="#b04BB9E2"/>
							</Style>

						</ListBox.Styles>

					</ListBox>
				</Border>

				<!-- ADD COMMAND (FOOTER ACTION) -->
				<Border Grid.Row="2"
						Background="#4affffff"
						CornerRadius="8"
						Padding="8">

					<Button Command="{Binding AddNew}"
							HorizontalAlignment="Stretch"
							Foreground="#f0000000"
							FontWeight="SemiBold"
							Padding="10 6"
							CornerRadius="6"
							Content="+ Create new command"
							Background="#300000ff">

						<Button.Styles>
							<Style Selector="Button:pointerover > ContentPresenter">
								<Setter Property="Background" Value="#600000ff"/>
							</Style>
							<Style Selector="Button:pressed > ContentPresenter">
								<Setter Property="Background" Value="#600000aa"/>
							</Style>
						</Button.Styles>

					</Button>
				</Border>

			</Grid>
		</Border>




		<!-- RIGHT PANEL: EDITOR -->
		<Border Grid.Column="1"
				Background="Transparent"
				Padding="6"
				Margin="4">

			<StackPanel Spacing="12">

				<!-- EDITOR CARD -->
				<Border Height="520"
						Background="#9A000000"
						CornerRadius="12"
						Padding="14"
						IsVisible="{Binding HasSelected}">

					<StackPanel Spacing="22">

						<!-- HEADER -->
						<StackPanel Spacing="8" HorizontalAlignment="Center">
							<TextBlock Text="Edit Command"
									   FontSize="20"
									   FontWeight="Bold"
									   Foreground="White"
									   TextAlignment="Center"/>

							<Border Height="1"
									Width="140"
									Background="#40FFFFFF"/>
						</StackPanel>

						<!-- COMMAND TYPE -->
						<Border Background="#1FFFFFFF"
								CornerRadius="8"
								Padding="12">
							<StackPanel Spacing="6">
								<TextBlock Text="Command Type"
										   FontSize="13"
										   FontWeight="SemiBold"
										   Foreground="White"/>

								<ComboBox
									ItemsSource="{Binding CommandTypes}"
									SelectedItem="{Binding Editing.CommandType, Mode=TwoWay}"
									MinWidth="220"
									Background="#E0FFFFFF"
									Foreground="#111"
									BorderBrush="#00000040"
									BorderThickness="1"
									CornerRadius="6"
									Padding="6"/>
							</StackPanel>
						</Border>

						<!-- SEQUENCE -->
						<Border Background="#1FFFFFFF"
								CornerRadius="8"
								Padding="12">
							<StackPanel Spacing="8">
								<TextBlock Text="Key Sequence"
										   FontSize="13"
										   FontWeight="SemiBold"
										   Foreground="White"/>

								<TextBox
									Text="{Binding Editing.SequenceText}"
									IsReadOnly="True"
									Background="#4022AA88"
									Foreground="Black"
									FontSize="14"
									FontWeight="SemiBold"
									Padding="10"
									CornerRadius="8"
									BorderBrush="#00FFD4"
									BorderThickness="1"
									GotFocus="SequenceBox_GotFocus"
									LostFocus="SequenceBox_LostFocus"/>

								<TextBlock Text="Click to record key sequence"
										   FontSize="11"
										   Foreground="#90FFFFFF"/>
							</StackPanel>
						</Border>

						<!-- LAUNCH APP -->
						<Border Background="#1FFFFFFF"
								CornerRadius="8"
								Padding="12"
								IsVisible="{Binding IsLaunchApp}">
							<StackPanel Spacing="6">
								<TextBlock Text="Application Path"
										   FontSize="13"
										   FontWeight="SemiBold"
										   Foreground="White"/>

								<TextBox Text="{Binding Editing.ApplicationPath}"
										 Watermark="Path to .exe"
										 Background="#E0FFFFFF"
										 Foreground="#111"
										 BorderBrush="#00000040"
										 BorderThickness="1"
										 CornerRadius="6"
										 Padding="8"/>
							</StackPanel>
						</Border>

						<!-- LAUNCH WEBPAGE -->
						<Border Background="#1FFFFFFF"
								CornerRadius="8"
								Padding="12"
								IsVisible="{Binding IsLaunchWebpage}">
							<StackPanel Spacing="6">
								<TextBlock Text="URL"
										   FontSize="13"
										   FontWeight="SemiBold"
										   Foreground="White"/>

								<TextBox Text="{Binding Editing.Url}"
										 Watermark="https://example.com"
										 Background="#E0FFFFFF"
										 Foreground="#111"
										 BorderBrush="#00000040"
										 BorderThickness="1"
										 CornerRadius="6"
										 Padding="8"/>
							</StackPanel>
						</Border>

						<!-- ACTIONS -->
						<StackPanel Orientation="Horizontal"
            HorizontalAlignment="Right"
            Spacing="10"
            Margin="0 8 0 0">

							<!-- DELETE -->
							<Button Content="Delete"
									Command="{Binding DeleteSelected}"
									Background="#1AFFFFFF"
									Foreground="#FF6B6B"
									BorderBrush="#66FF6B6B"
									BorderThickness="1"
									CornerRadius="999"
									FontWeight="SemiBold"
									Padding="20 8">

								<Button.Styles>

									<Style Selector="Button:pointerover > ContentPresenter">
										<Setter Property="Background" Value="#33FF6B6B"/>
										<Setter Property="Foreground" Value="White"/>
									</Style>

									<Style Selector="Button:pressed > ContentPresenter">
										<Setter Property="Background" Value="#44FF6B6B"/>
									</Style>

								</Button.Styles>
							</Button>

							<!-- SAVE -->
							<Button Content="Save Changes"
									Command="{Binding SaveSelected}"
									Background="#c04BB9E2"
									Foreground="White"
									CornerRadius="999"
									FontWeight="SemiBold"
									Padding="22 8">

								<Button.Styles>


									<!-- Hover -->
									<Style Selector="Button:pointerover > ContentPresenter">
										<Setter Property="Background" Value="#704BB9E2"/>
										<Setter Property="Foreground" Value="White"/>
									</Style>

									<!-- Pressed -->
									<Style Selector="Button:pressed > ContentPresenter">
										<Setter Property="Background" Value="#c01F93BE"/>
									</Style>

								</Button.Styles>
							</Button>

						</StackPanel>

					</StackPanel>
				</Border>

				<!-- ERROR / EMPTY STATE -->
				<Border Background="#33FF4444"
						CornerRadius="8"
						Padding="10"
						IsVisible="{Binding HasSelected}">
					<TextBlock Text="{Binding ErrorMessage}"
							   Foreground="White"
							   FontSize="13"
							   TextAlignment="Center"/>
				</Border>

			</StackPanel>
		</Border>

	</Grid>
</Window>
